<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PoHW Verification — Proof of Human Work</title>
    <link rel="stylesheet" href="styles.css?v=3">
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <h1>PROOF OF HUMAN WORK</h1>
                <p class="subtitle">Verification Interface</p>
            </div>
        </header>

        <main>
            <div class="verification-card">
                <div class="card-header">
                    <h2>VERIFY PROOF</h2>
                    <p>Upload a file, paste content, or enter a hash to verify authorship</p>
                </div>

                <div class="verification-tabs">
                    <button class="tab-button active" data-tab="file">FILE</button>
                    <button class="tab-button" data-tab="hash">HASH</button>
                    <button class="tab-button" data-tab="content">CONTENT</button>
                </div>

                <!-- File Upload Tab -->
                <div class="tab-content active" id="file-tab">
                    <div class="upload-area" id="upload-area">
                        <svg class="upload-icon" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                            <polyline points="17 8 12 3 7 8"></polyline>
                            <line x1="12" y1="3" x2="12" y2="15"></line>
                        </svg>
                        <p class="upload-text">Drop your file here or click to browse</p>
                        <p class="upload-hint">Supports text, images, documents, and more</p>
                        <input type="file" id="file-input" class="file-input" multiple>
                    </div>
                    <div id="file-info" class="file-info hidden"></div>
                </div>

                <!-- Hash Input Tab -->
                <div class="tab-content" id="hash-tab">
                    <div class="input-group">
                        <label for="hash-input">Content Hash</label>
                        <input type="text" id="hash-input" placeholder="0xabc123..." class="hash-input">
                        <p class="input-hint">Enter the hash of the content you want to verify</p>
                    </div>
                </div>

                <!-- Content Paste Tab -->
                <div class="tab-content" id="content-tab">
                    <div class="input-group">
                        <label for="content-textarea">Content</label>
                        <textarea id="content-textarea" placeholder="Paste your content here..." rows="10" class="content-textarea"></textarea>
                        <p class="input-hint">The content will be hashed and verified</p>
                    </div>
                </div>

                <div class="registry-selector">
                    <label for="registry-select">Registry Node</label>
                    <div class="registry-select-wrapper">
                        <select id="registry-select" class="registry-select">
                            <option value="">Loading nodes...</option>
                        </select>
                        <button id="add-custom-registry" class="add-registry-btn" title="Add custom registry">+</button>
                    </div>
                    <div id="custom-registry-input" class="custom-registry-input hidden">
                        <input type="text" id="custom-registry-url" placeholder="https://your-registry-node.com" class="custom-registry-url">
                        <button id="add-custom-btn" class="add-custom-btn">Add</button>
                        <button id="cancel-custom-btn" class="cancel-custom-btn">Cancel</button>
                    </div>
                    <div id="node-status" class="node-status"></div>
                </div>

                <button id="verify-button" class="verify-button">
                    <span class="button-text">Verify Proof</span>
                    <span class="button-loader hidden"></span>
                </button>
            </div>

            <!-- Results Section -->
            <div id="results-section" class="results-section hidden">
                <div class="result-card" id="result-card">
                    <div class="result-header">
                        <h3>VERIFICATION RESULT</h3>
                        <div class="status-badge" id="status-badge"></div>
                    </div>

                    <div class="result-content">
                        <div class="result-item">
                            <span class="result-label">Status</span>
                            <span class="result-value" id="result-status">—</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">Signer DID</span>
                            <span class="result-value" id="result-signer">—</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">Timestamp</span>
                            <span class="result-value" id="result-timestamp">—</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">Content Hash</span>
                            <span class="result-value hash-value" id="result-hash">—</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">Registry</span>
                            <span class="result-value" id="result-registry">—</span>
                        </div>
                    </div>

                    <!-- Merkle Proof Section -->
                    <div id="merkle-section" class="merkle-section">
                        <h4>MERKLE PROOF</h4>
                        <div class="result-content">
                            <div class="result-item">
                                <span class="result-label">Batch Status</span>
                                <span class="result-value" id="batch-status">—</span>
                            </div>
                            <div class="result-item" id="batch-id-item">
                                <span class="result-label">Batch ID</span>
                                <span class="result-value hash-value" id="batch-id">—</span>
                            </div>
                            <div class="result-item" id="batch-size-item">
                                <span class="result-label">Batch Size</span>
                                <span class="result-value" id="batch-size">—</span>
                            </div>
                            <div class="result-item" id="merkle-index-item">
                                <span class="result-label">Position in Batch</span>
                                <span class="result-value" id="merkle-index">—</span>
                            </div>
                            <div class="result-item" id="merkle-root-item">
                                <span class="result-label">Merkle Root</span>
                                <span class="result-value hash-value" id="merkle-root">—</span>
                            </div>
                            <div class="result-item" id="proof-path-item">
                                <span class="result-label">Proof Path</span>
                                <div class="proof-path" id="proof-path"></div>
                            </div>
                            <div class="result-item" id="pending-count-item">
                                <span class="result-label">Pending Proofs</span>
                                <span class="result-value" id="pending-count">—</span>
                            </div>
                        </div>
                    </div>

                    <!-- Deterministic Verdict Section -->
                    <div id="verdict-section" class="verdict-section">
                        <h4>DETERMINISTIC VERDICT</h4>
                        <div class="result-content">
                            <div class="result-item">
                                <span class="result-label">Verdict Type</span>
                                <span class="result-value verdict-type" id="verdict-type">—</span>
                            </div>
                            <div class="result-item">
                                <span class="result-label">Verdict Explanation</span>
                                <span class="result-value" id="verdict-explanation">—</span>
                            </div>
                        </div>
                    </div>

                    <!-- PAV Ontology Section -->
                    <div id="pav-section" class="pav-section">
                        <h4>PAV ONTOLOGY</h4>
                        
                        <!-- Core Provenance -->
                        <div class="pav-subsection">
                            <h5>Core Provenance</h5>
                            <div class="result-content">
                                <div class="result-item">
                                    <span class="result-label">Created By (DID)</span>
                                    <span class="result-value" id="pav-created-by">—</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">Created On</span>
                                    <span class="result-value" id="pav-created-on">—</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">Derived From</span>
                                    <div class="result-value hash-value" id="pav-derived-from" style="white-space: pre-wrap; font-size: 0.85rem; line-height: 1.6;">—</div>
                                </div>
                            </div>
                        </div>

                        <!-- Environment Attestations -->
                        <div class="pav-subsection">
                            <h5>Environment Attestations</h5>
                            <div class="result-content">
                                <div class="result-item">
                                    <span class="result-label">Authored On Device</span>
                                    <span class="result-value" id="pav-device">—</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">Environment Attestation</span>
                                    <span class="result-value" id="pav-environment">—</span>
                                </div>
                            </div>
                        </div>

                        <!-- Process Layer Evidence -->
                        <div class="pav-subsection">
                            <h5>Process Layer Evidence</h5>
                            <div class="result-content">
                                <div class="result-item">
                                    <span class="result-label">Process Digest</span>
                                    <span class="result-value hash-value" id="pav-process-digest">—</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">Entropy Proof</span>
                                    <span class="result-value" id="pav-entropy">—</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">Temporal Coherence</span>
                                    <span class="result-value" id="pav-coherence">—</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">Compound Hash</span>
                                    <span class="result-value hash-value" id="pav-compound-hash">—</span>
                                </div>
                            </div>
                        </div>

                        <!-- Cryptographic Attestations -->
                        <div class="pav-subsection">
                            <h5>Cryptographic Attestations</h5>
                            <div class="result-content">
                                <div class="result-item">
                                    <span class="result-label">Digital Signature</span>
                                    <span class="result-value hash-value" id="pav-signature">—</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">Merkle Inclusion</span>
                                    <span class="result-value" id="pav-merkle-inclusion">—</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">Content Address</span>
                                    <div class="result-value" id="pav-claim-uri" style="display: block; width: 100%;">—</div>
                                </div>
                            </div>
                        </div>

                        <!-- Verification & Compliance -->
                        <div class="pav-subsection">
                            <h5>Verification & Compliance</h5>
                            <div class="result-content">
                                <div class="result-item">
                                    <span class="result-label">Assistance Profile</span>
                                    <span class="result-value" id="pav-assistance">—</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">Verification Tier</span>
                                    <span class="result-value" id="pav-tier">—</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">Revocation State</span>
                                    <span class="result-value" id="pav-revocation">—</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">Registry Anchor</span>
                                    <span class="result-value" id="pav-registry-anchor">—</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">Compliance Profile</span>
                                    <span class="result-value" id="pav-compliance">—</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- All Proofs Section -->
                    <div id="all-proofs-section" class="all-proofs-section hidden">
                        <div class="proofs-header">
                            <h4>All Proofs for This Hash</h4>
                            <div class="proofs-count" id="proofs-count">0 proofs found</div>
                        </div>
                        
                        <!-- Search and Filter -->
                        <div class="proofs-search-filter">
                            <div class="search-row">
                                <input type="text" id="proof-search-did" class="proof-search-input" placeholder="Search by DID...">
                                <select id="proof-filter-tier" class="proof-filter-select">
                                    <option value="all">All Tiers</option>
                                    <option value="green">Green</option>
                                    <option value="blue">Blue</option>
                                    <option value="purple">Purple</option>
                                    <option value="grey">Grey</option>
                                </select>
                                <select id="proof-sort" class="proof-filter-select">
                                    <option value="newest">Newest First</option>
                                    <option value="oldest">Oldest First</option>
                                    <option value="tier">By Tier</option>
                                    <option value="did">By DID</option>
                                </select>
                                <label class="verified-only-label">
                                    <input type="checkbox" id="proof-filter-verified" class="proof-checkbox">
                                    Verified Only
                                </label>
                            </div>
                            <div class="date-filter-row">
                                <label>From: <input type="date" id="proof-filter-from" class="date-input"></label>
                                <label>To: <input type="date" id="proof-filter-to" class="date-input"></label>
                                <button id="clear-filters-btn" class="clear-filters-btn">Clear Filters</button>
                            </div>
                        </div>
                        
                        <!-- Proofs List -->
                        <div id="proofs-list" class="proofs-list"></div>
                        
                        <!-- Pagination -->
                        <div id="proofs-pagination" class="proofs-pagination hidden"></div>
                    </div>

                    <!-- Reputation Section -->
                    <div id="reputation-section" class="reputation-section hidden">
                        <h4>REPUTATION & TRUST</h4>
                        <div class="result-content">
                            <div class="result-item">
                                <span class="result-label">Reputation Score</span>
                                <span class="result-value" id="reputation-score">—</span>
                            </div>
                            <div class="result-item">
                                <span class="result-label">Tier</span>
                                <span class="result-value reputation-tier" id="reputation-tier">—</span>
                            </div>
                            <div class="result-item">
                                <span class="result-label">Trust Level</span>
                                <span class="result-value" id="reputation-trust">—</span>
                            </div>
                            <div class="result-item">
                                <span class="result-label">Successful Proofs</span>
                                <span class="result-value" id="reputation-proofs">—</span>
                            </div>
                            <div class="result-item">
                                <span class="result-label">Anomalies</span>
                                <span class="result-value" id="reputation-anomalies">—</span>
                            </div>
                        </div>
                    </div>

                    <!-- Challenge/Dispute Section -->
                    <div id="challenge-section" class="challenge-section hidden">
                        <h4>DISPUTE RESOLUTION</h4>
                        <div class="result-content">
                            <div class="result-item">
                                <span class="result-label">Challenges</span>
                                <span class="result-value" id="challenge-count">—</span>
                            </div>
                            <div class="result-item" id="challenge-list-item" style="display: none;">
                                <span class="result-label">Active Challenges</span>
                                <div class="challenge-list" id="challenge-list"></div>
                            </div>
                            <div class="challenge-actions">
                                <button id="submit-challenge-btn" class="challenge-btn">Submit Challenge</button>
                                <button id="view-challenges-btn" class="challenge-btn secondary">View Challenges</button>
                            </div>
                        </div>
                        
                        <!-- Challenge Form (hidden by default) -->
                        <div id="challenge-form" class="challenge-form hidden">
                            <div class="input-group">
                                <label for="challenger-did">Your DID</label>
                                <input type="text" id="challenger-did" class="challenge-input" placeholder="did:pohw:...">
                            </div>
                            <div class="input-group">
                                <label for="challenge-reason">Reason</label>
                                <select id="challenge-reason" class="challenge-select">
                                    <option value="suspected_ai_generated">Suspected AI-Generated</option>
                                    <option value="suspected_plagiarism">Suspected Plagiarism</option>
                                    <option value="suspected_fraud">Suspected Fraud</option>
                                    <option value="entropy_discrepancy">Entropy Discrepancy</option>
                                    <option value="rate_limit_anomaly">Rate Limit Anomaly</option>
                                    <option value="process_metrics_inconsistent">Process Metrics Inconsistent</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            <div class="input-group">
                                <label for="challenge-description">Description</label>
                                <textarea id="challenge-description" class="challenge-textarea" rows="4" placeholder="Describe why you are challenging this proof..."></textarea>
                            </div>
                            <div class="challenge-form-actions">
                                <button id="submit-challenge-submit" class="challenge-btn primary">Submit Challenge</button>
                                <button id="cancel-challenge-btn" class="challenge-btn secondary">Cancel</button>
                            </div>
                        </div>
                    </div>

                    <!-- Blockchain Anchors Section -->
                    <div id="anchors-section" class="anchors-section hidden">
                        <h4>BLOCKCHAIN ANCHORS</h4>
                        <div id="anchors-list" class="anchors-list"></div>
                    </div>

                    <!-- Error Section -->
                    <div id="error-section" class="error-section hidden">
                        <div class="error-message" id="error-message"></div>
                    </div>
                </div>
            </div>

            <!-- Info Section -->
            <div class="info-card">
                <h3>VERIFICATION PROCESS</h3>
                <ul class="info-list">
                    <li>
                        <strong>Content Hash:</strong> File is hashed using SHA-256 (client-side)
                    </li>
                    <li>
                        <strong>Registry Lookup:</strong> Hash queried against PoHW registry
                    </li>
                    <li>
                        <strong>Signature Check:</strong> Cryptographic signature verified
                    </li>
                    <li>
                        <strong>Merkle Proof:</strong> Inclusion in Merkle batch confirmed
                    </li>
                    <li>
                        <strong>Blockchain Anchors:</strong> Timestamp verified on public chains
                    </li>
                </ul>
                <div class="privacy-note">
                    <strong>PRIVACY:</strong> Content never leaves your browser. Only hashes are transmitted.
                </div>
            </div>
        </main>

        <footer>
            <p>Protocol: Proof of Human Work v1.0.0</p>
            <p>
                <a href="../">Home</a> | 
                <a href="../spec/">Specification</a> | 
                <a href="../docs/">Documentation</a> | 
                <a href="https://github.com/gdnshnk/pohw-registry-node" target="_blank">GitHub</a>
            </p>
        </footer>
    </div>

    <script src="crypto-utils.js"></script>
    <script src="verification.js"></script>
    <script src="registry-discovery.js"></script>
    <script src="app.js"></script>
</body>
</html>

